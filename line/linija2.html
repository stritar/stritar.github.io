<!doctype html>
<html class="no-js" lang="">

<head>
    <title>Line test</title>

    <style>
        .desktop-map {
            display: block;
            width: 1180px;
            height: 680px;
            margin: 0 auto;
        }
        
        .mobile-map {
            display: none;
        }
        
        @media (max-width: 1180px) {
            .desktop-map {
                display: none;
            }
            .mobile-map {
                display: block;
                width: 320px;
                height: 1015px;
                margin: 0 auto;
            }
        }
        
        tspan {
            font-family: 'Campton Light';
            font-size: 14px;
            line-height: 18px;
        }
        
        .map-terminus {
            font-family: 'Campton ExtraBold';
        }
        
        section {
            display: block;
            height: 1200px;
        }
        
        section p {
            width: 100%;
            margin-top: 20%;
            text-align: center;
            font-family: sans-serif;
            font-size: 40px;
        }
        /* ANIM*/
        /*
        .lines {
            animation: dash 5s ease-in forwards;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            opacity: 1;
            transition: opacity 5s;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: 0;
            }
        }
*/
        
        .test {
            opacity: 1;
            transition: opacity ease-in 3s;
        }
        
        .test.animated {
            opacity: 0;
        }
    </style>
</head>

<body>
    <section>
        <p>3</p>
    </section>
    <section>
        <p>2</p>
    </section>
    <section>
        <p>1</p>
    </section>
    <div>
        <div class="map">
            <p class="test">LOLLL</p>
            <svg width="1180px" height="680px" viewBox="0 0 1180 680" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="DS-V2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                    <g id="Desktop" sketch:type="MSArtboardGroup">
                        <path class="" d="M588,47 L429.066462,205.933538 C425.167841,209.832159 417.52261,213 411.999469,213 L347.000531,213 C341.48008,213 333.725823,216.053799 329.686922,219.820852 L240.313078,303.179148 C236.269806,306.950277 233,314.477658 233,320.001128 L233,429.00128 C233,434.519432 236.16829,442.161069 240.07094,446.063718 L361.084119,567.076897" id="BLUE" stroke="#80BDDC" stroke-width="4" stroke-linecap="round" sketch:type="MSShapeGroup" transform="translate(410.500000, 307.038449) scale(-1, 1) translate(-410.500000, -307.038449) "></path>
                    </g>
                </g>
            </svg>
        </div>
    </div>
    <section>
        <p>1</p>
    </section>
    <section>
        <p>2</p>
    </section>
    <section>
        <p>3</p>
    </section>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        $(function () {
            var $w = $(window);

            animateRails();

            $w.scroll(function () {
                animateRails();
            });

            function animateRails() {
                var container = $('.map');
                var targetOffset = container.offset().top;
                var visualOffset = $w.outerHeight() / 1.4;

                if ($w.scrollTop() > targetOffset - visualOffset && !$('.test').hasClass('animated')) {
                    $('.test').addClass('animated');
                }
            }
        });
    </script>

</body>


</html>